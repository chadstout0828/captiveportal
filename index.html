<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title><unifi txt="WelcomePage.Title" /></title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="./reset-min.css" />
  <link rel="stylesheet" type="text/css" href="./styles.css" />
  <link rel="stylesheet" type="text/css" href="./normalize.min.css" />
  <link rel="stylesheet" type="text/css" href="./tingle.min.css" />
  <style TYPE="text/css">
			body {
			  margin: 0px;
			  padding: 0px;
			  background: #fff;
			  scrollbar-base-color:gray
			}
			
			.image {
			  font-size: 0;
			  text-align: center;
			  height: 80vh;
			}			
  </style>
  <script type="text/javascript" src="./js/jquery.min.js"></script>
  <script type="text/javascript" src="./js/guest.js"></script>
  <script type="text/javascript" src="./js/jquery-ui.min.js"></script>
  <script type="text/javascript" src="./js/tingle.min.js"></script>
  <script type="text/javascript" src="./js/imageMapResizer.min.js"></script>
  <script>
	function sbmitclick() {
		modal.destroy();
		document.getElementById('connect').click();
	}
	function modalAcceptClick() {
		modal.close();
		modal.destroy();
		document.getElementById('connect').click();
	}
	function showtandc() {
		modal.open();
	}
  </script>
</head>
<body>
<!-- see README.txt for HTML customization instructions -->
<div>
	<div>
		<form id="loginform" action="#">
			<div class="form-controls">
					<!-- submit (only for no authentication) -->
						<input type="submit" id="connect" style="display:none;" />
						<p id="banner" class="image">
							<img class="WPCUWiFiBanner" name="WPCUWiFiBanner" usemap="#m_Map" height="100%" src="./images/WiFi_login_2019.jpg">
							<map name="m_Map">
								<area shape="rect" coords="152,744,695,815" style="cursor: pointer;" onclick="sbmitclick()">
								<area shape="rect" coords="432,900,679,920" style="cursor: pointer;" onclick="showtandc()">
								<area shape="rect" coords="62,1345,178,1360" href="https://www.wpcu.coop/en-us" title="Wright-Patt Credit Union" >
								<area shape="rect" coords="521,1430,565,1474" href="https://www.facebook.com/WrightPattCreditUnion" title="Facebook" >
								<area shape="rect" coords="584,1430,628,1474" href="https://twitter.com/wpcu" title="Twitter" >
								<area shape="rect" coords="648,1430,692,1474" href="https://www.instagram.com/WrightPattCreditUnion" title="Instagram" >
								<area shape="rect" coords="711,1430,755,1474" href="https://www.youtube.com/user/wpcu" title="YouTube" >
							</map>
							<script>$('map').imageMapResize();</script>						
							<!--[if lte IE 8]>
								<script src= src="./js/ie8.polyfil.min.js"></script>
							<![endif]-->
						</p>
				</div>
			</div>
		</form>
		<script>	
			function download_file(fileURL, fileName) {
				// for non-IE
				if (!window.ActiveXObject) {
					var save = document.createElement('a');
					save.href = fileURL;
					save.target = '_blank';
					var filename = fileURL.substring(fileURL.lastIndexOf('/')+1);
					save.download = fileName || filename;
					if ( navigator.userAgent.toLowerCase().match(/(ipad|iphone|safari)/) && navigator.userAgent.search("Chrome") < 0) {
						document.location = save.href; 
						// window event not working here
					}else{
						var evt = new MouseEvent('click', {
							'view': window,
							'bubbles': true,
							'cancelable': false
						});
						save.dispatchEvent(evt);
						(window.URL || window.webkitURL).revokeObjectURL(save.href);
					}	
				}

				// for IE < 11
				else if ( !! window.ActiveXObject && document.execCommand)     {
					var _window = window.open(fileURL, '_blank');
					_window.document.close();
					_window.document.execCommand('SaveAs', true, fileName || fileURL)
					_window.close();
				}
			}
			
			var modal = new tingle.modal({
				footer: true,
				stickyFooter: true,
				closeMethods: ['overlay', 'button', 'escape'],
				closeLabel: "Close",
				cssClass: ['custom-class-1', 'custom-class-2'],
				beforeClose: function() {
					return true; // close the modal
					return false; // nothing happens
				}
			});		
			modal.setContent('<iframe width="100%" height="400" src="MC_WiFi_TandC-Final.htm" frameborder="0" allowfullscreen></iframe>');				
			modal.addFooterBtn('Accept', 'tingle-btn tingle-btn--primary', function() { modalAcceptClick(); });
			modal.addFooterBtn('Close', 'tingle-btn tingle-btn', function() { modal.close(); });
			modal.addFooterBtn('Download Terms & Conditions', 'tingle-btn tingle-btn--danger', function() { 
				download_file("./MC_WiFi_TandC-Final.pdf","captiveportal/MC_WiFi_TandC-Final.pdf");
				modal.close();
			});
		</script>
	</div>
</div>

<script type="text/javascript">
jQuery(document).ready(function() {
	jQuery('input').keypress(function(e) {
		var code = (e.keyCode ? e.keyCode : e.which);
		if ( (code==13) || (code==10)) {
			jQuery(this).blur();
			return false;
		}
	});
});

$(function() {
	$('#tou').hide();
	$('#show-tou').click(function() {
		$('#tou').show();
	});
	$('#accept-tou').click(function() {
		if (!$('#accept-tou').checked()) {
			$('input.requires-tou').disable();
		}
		else {
			$('input.requires-tou').enable();
		}
	})
});
</script>
<script src="./js/meraki.js"></script>
</body>
</html>
